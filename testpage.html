<html>
<head>
	<title>MiniMask Extension</title>
	
		
</head>
<body>

	Hello..	

	<button onclick='getBlock();'>Click Me</button>
	
<script type="text/javascript">
	
	/**
	 * Make a POST request
	 */
	async function makeGenericPostRequest(url, params, userpass, callback){
			
		let headers = new Headers();
		headers.append('Authorization', 'Basic ' + btoa(userpass));
		headers.append('Content-Type', 'application/x-www-form-urlencoded');
		
		var dat = {};
		dat.address = "0xFF";	
		
		const response = await fetch(url, {
		  method: "POST",
		  headers: headers,
		  body: "address=0xFF",
		  // …
		});
		
		if (!response.ok) {
	      
	    }

		//Wait for the response
	    //const result = await response.text();
		const result = await response.json();
		
		//Send result back
		callback(result) ;
	}
	
	function getBlock(){
		/*MINIMASK.block(function(resp){
			console.log("TESTPAGE BLOCK : "+JSON.stringify(resp));	
		});*/
		
		/*MINIMASK.create(function(resp){
			console.log("TESTPAGE CREATE : "+JSON.stringify(resp));	
		});*/
		
		MINIMASK.account.balance(function(resp){
			console.log("TESTPAGE BALANCE : "+JSON.stringify(resp));	
		});
	}
	
		
	//Wait for page to load
	window.onload = function () {
		
		//Initialise MiniMask
		MINIMASK.init(function(){});
		
		//testerFunction();
		getBlock();
		
		/*makeGenericPostRequest("http://127.0.0.1:8080/wallet/balance",{},"apicaller:apicaller",function(resp){
			console.log("TEST POST : "+JSON.stringify(resp));
		});*/	
	}

	/*async function makePostRequest(url, params, callback){
		
		let headers = new Headers();
		headers.append('Authorization', 'Basic ' + btoa("apicaller:apicaller"));
		
		const response = await fetch(url, {
		  method: "POST",
		  headers: headers,
		  body: JSON.stringify(params),
		  // …
		});
		
		if (!response.ok) {
	      
	    }

		//Wait for the response
	    const result = await response.text();
		
		//Send result back
		callback(result) ;
	}*/
		
</script>
		
</body>	


</html>